<nav class="sidebar" [class.modal-open]="hasModalOpen">
  <!-- Logo -->
  <div class="sidebar-header">
    <div class="logo-container">
      <div class="logo-icon">
        <i class="bi bi-book-fill"></i>
      </div>
      <h5 class="logo-text">Eshare Books</h5>
    </div>
  </div>

  <!-- User Profile -->
  <div class="user-profile">
    <div class="user-avatar">
      <img
        [src]="userAvatar"
        [alt]="userFullName"
        class="avatar-img"
        (error)="$any($event.target).src = '/default-admin.png'"
      />
    </div>
    <div>
      <p class="user-name">{{ userFullName }}</p>
      <p class="user-email">{{ isLoading ? 'Loading...' : displayUser.email }}</p>
    </div>
  </div>

  <!-- Navigation Menu -->
  <ul class="nav flex-column nav-menu">
    <li class="nav-item">
      <a class="nav-link" routerLink="/dashboard" routerLinkActive="active">
        <i class="bi bi-grid-3x3-gap"></i> Dashboard
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" routerLink="/books" routerLinkActive="active">
        <i class="bi bi-book"></i> Books
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" routerLink="/users" routerLinkActive="active">
        <i class="bi bi-people"></i> Users
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" routerLink="/categories" routerLinkActive="active">
        <i class="bi bi-tag"></i> Categories
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" routerLink="/reports" routerLinkActive="active">
        <i class="bi bi-bar-chart"></i> Reports
      </a>
    </li>
  </ul>

  <!-- Logout -->
  <div class="logout-section" *ngIf="isLoggedIn">
    <a class="nav-link" (click)="openLogoutModal()" style="cursor: pointer">
      <i class="bi bi-box-arrow-left"></i> {{ isLoading ? 'Loading...' : 'Logout' }}
    </a>
  </div>

  <!-- Logout Confirmation Modal -->
  <div *ngIf="showLogoutModal" class="modal-overlay" (click)="closeLogoutModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h5>Confirm Logout</h5>
        <button type="button" class="btn-close" (click)="closeLogoutModal()"></button>
      </div>
      <div class="modal-body">
        <p>Are you sure you want to logout?</p>
        <div class="user-info">
          <strong>User:</strong> {{ userFullName }}<br />
          <strong>Email:</strong> {{ displayUser.email }}
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="closeLogoutModal()">Cancel</button>
        <button type="button" class="btn btn-danger" (click)="confirmLogout()">Logout</button>
      </div>
    </div>
  </div>
</nav>
